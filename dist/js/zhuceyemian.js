"use strict"; $(function () { var o = document.querySelector(".shoujihao"), n = document.querySelector(".yval"), e = document.querySelector(".ybtn"), r = document.querySelector(".sval"), t = document.querySelector(".tishixinxi"), c = document.querySelector(".tishi1"), l = (document.querySelector(".tishi2"), document.querySelector(".tishi3"), !1), i = !1, u = !1; function s() { var e = parseInt(1e4 * Math.random().toFixed(4)); n.innerHTML = e } o.onblur = function () { var e = o.value.trim(); if (e) if (/^1[2-8]\d{9}$/.test(e)) { console.log(e); ajax("post", "../api/zhuce.php", "shoujihao=" + e, function (e) { console.log(e), "no" == e ? (t.innerHTML = "可以使用", t.style.color = "#58bc58", l = !0) : "yes" == e && (console.log("手机号码已存在"), t.innerHTML = "该用户已经存在", t.style.color = "red") }) } else console.log("手机号码格式错误"), alert("手机号不符合规则"); else c.innerHTML = "不能为空！" }, s(), e.onclick = function () { s() }, r.onblur = function () { r.value.trim() == n.innerHTML ? (i = !0, t.innerHTML = "") : t.innerHTML = "验证码输入错误" }; var a = document.querySelector(".password"); a.onblur = function () { var e = a.value; e && (/^\d{3,8}$/.test(e) ? (console.log("手机密码格式正确"), t.innerHTML = "", u = !0) : t.innerHTML = "数字,3到8位数") }; var d = document.querySelector(".checked"); $(".zbtn").on("click", function () { if (1 == l && 1 == i && 1 == u) if (d.checked) { var e = a.value, n = o.value; console.log(n), $.ajax({ type: "post", data: "username=" + n + "&password=" + e, url: "../api/regin.php", success: function (e) { console.log(e), "success" === e ? (console.log(666), alert("注册成功！"), location.href = "../html/dengluye.html", t.innerHTML = "") : alert("注册失败！") } }) } else t.innerHTML = "下面没勾"; else t.innerHTML = "用户名或密码不规范" }) });