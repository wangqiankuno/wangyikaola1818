"use strict";document.addEventListener("DOMContentLoaded",function(){document.querySelector("#head_top_right");for(var e=document.querySelector(".jiesuan"),n=document.getElementsByClassName("head_top_right2"),t=document.getElementsByClassName("sanjiao"),c=function(e){n[e].onmouseover=function(){t[e].style.transform="rotateZ(180deg)",t[e].style.transitionDuration="0.2s"},n[e].onmouseout=function(){t[e].style.transform="rotateZ(0deg)",t[e].style.transitionDuration="0.2s"}},o=0;o<n.length;o++)c(o);d();var i=Cookie.get("name");$(".cart").on("click",".del",function(){confirm("您确定要删除吗?")&&$(this).parent().parent().remove(),r();var e=$(this).parents("li")[0].dataset.id;console.log(e);var n="../api/gouwuche.php?id="+e+"&names="+i+"&del=true";name;$.ajax({type:"GET",url:n,success:function(e){console.log(e),d()}}),r()}),e.onclick=function(){alert("添加的太少了！")},$("#delall").on("click",function(){$(".good_check input").each(function(e,n){if($(".good_check input").eq(e).prop("checked"))if(l.push(e),confirm("您确定要删除全部商品吗？")){var t="../api/gouwuche.php?id="+$(this).parents("li")+"&names="+i+"&dels=true";$.ajax({type:"GET",url:t,success:function(e){console.log(e),d(),r()}})}else d(),r();else d(),r()}),r()}),$(".cart").on("click",function(e){if("addnum"===e.target.className){e.preventDefault(),a=$(e.target).prev().val(),a++,$(e.target).prev().val(a);var n=1*$(e.target).parents(".num").prev().html().slice(1);$(e.target).parents(".num").next().html("￥"+n*a*1),r()}else if("cutnum"===e.target.className){if(e.preventDefault(),a=$(e.target).next().val(),1==a)return;a--,$(e.target).next().val(a);n=1*$(e.target).parents(".num").prev().html().slice(1);$(e.target).parents(".num").next().html("￥"+n*a*1),r()}});var l=[];function r(){l=[],$(".good_check input").each(function(e,n){$(".good_check input").eq(e).prop("checked")&&l.push(e)});var n=0,t=0;l.forEach(function(e){n+=1*$(".nownum").eq(e).val(),t+=1*$(".good_total").eq(e).text().slice(1)}),$("#allnum").html("已选 "+n+" 件商品"),$("#totalprice").html("总计（不含运费）：￥ "+t.toFixed(2))}jQuery(function(c){function e(){var t=!0;return c("#cart input").each(function(e,n){c("#cart input").eq(e).prop("checked")||(t=!1)}),t}c("#all").on("click",function(){console.log(c("#all")),c("#all").prop("checked")?c(".cart input").prop("checked",!0):c(".cart input").prop("checked",!1),r()}),c("#cart").on("click","input",function(){console.log(e()),e()?c("#all").prop("checked",!0):c("#all").prop("checked",!1),r()});var n=c("li :checkbox");function t(){$checked=c("li :checkbox").filter(":checked"),c("#xuanzhong").prop("checked",$checked.length===n.length)}n.on("click",function(){r(),t()}),c("#xuanzhong").on("click",function(){n.prop("checked",this.checked),t(),r()})});var u=document.querySelector(".yonghuming"),s=document.querySelector(".tuichubtn"),p=Cookie.get("name");function d(){var t=document.querySelector(".cart"),e=Cookie.get("name");""===e||JSON.parse(e),$.getJSON("../api/gouwuche.php?ssr=ture&goodslist="+e,function(e){var n=e;t.innerHTML=n.map(function(e){return'<li data-id="'+e.id+'">\n                                        <p class="good_check"><input type="checkbox" name="good" value=""  class="checkbox"  /></p>\n                                        <p><img src="'+e.images+'" height="80" width="80" alt="" /></p>\n                                        <p class="good_name">'+e.jieshao+'</p>\n                                        <p class="good_price">￥'+e.jiage+'</p>\n                                        <p class="num">\n                                            <span class="cutnum">-</span><input class="nownum" type="Number" value="'+e.qty+'" min="1"/><span class="addnum">+</span>   \n                                        </p>\n                                        <p class="good_total">￥'+1*e.qty*(1*e.jiage).toFixed(2)+'</p>\n                                        <p class="good_del">\n                                            <a class="del" >删除</a>\n                                        </p>\n                                    </li>'}).join("")})}(p=p.slice(7))&&(u.innerHTML="欢迎你尾号"+p+"的用户",s.style.display="inline-block"),s.onclick=function(){Cookie.remove("name","/"),u.innerHTML="考拉欢迎你！",s.style.display="none"}});